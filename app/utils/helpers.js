function mapDataToTopScorers(topScorers, teams) {
  let player = {};
  const mappedPlayers = [];

  topScorers.forEach((scorer, index) => {
    player.name = `${scorer.firstname} ${scorer.lastname}`;
    player.team = scorer.team_name;
    player.value = scorer.goals.total;
    player.rank = getRank(index, player.value, mappedPlayers[index - 1]);
    player.imageUri = getLogoUri(scorer.team_id, teams);

    mappedPlayers.push({ ...player });
  });

  return mappedPlayers;
}

function getRank(index, currentPlayerGoals, previousPlayer) {
  // First player; assumes data is sorted
  if (index === 0) return 1;

  // Same number of goals, same rank
  return currentPlayerGoals < previousPlayer.value ? previousPlayer.rank + 1 : previousPlayer.rank;
}

// TODO: Setup function to retrieve logo from external data
function getLogoUri(teamId, teamList = []) {
  return (
    teamList.find((team) => team.team_id === teamId)?.logo ||
    'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIwAAACMCAYAAACuwEE+AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkZDQ0FEN0FBQkI4MzExRUE4N0E4RjQ4QUU0Q0FERkQ1IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkZDQ0FEN0FCQkI4MzExRUE4N0E4RjQ4QUU0Q0FERkQ1Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RkNDQUQ3QThCQjgzMTFFQTg3QThGNDhBRTRDQURGRDUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RkNDQUQ3QTlCQjgzMTFFQTg3QThGNDhBRTRDQURGRDUiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7uDwhSAAAOgUlEQVR42uxd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'
  );
}

export { mapDataToTopScorers };
